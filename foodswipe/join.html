<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <title>DishSwipe Join</title>
    <!-- Optional: Meta Tags für Responsivität und Mobilgeräte-Optimierung hinzufügen -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <script>
      async function checkURL(url) {
        try {
          const response = await fetch(url);
          if (!response.ok)
            return (window.location.href = `com.deltaapps.FoodSwipe://?code=${code}`);
          console.log(`URL exists: ${url}`);
        } catch (error) {
          window.open("https://apps.apple.com/de/app/dishswipe/id6477916906");
        }
      }

      window.onload = function () {
        var ua = navigator.userAgent.toLowerCase();
        var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");

        if (isAndroid) {
          window.open(
            "https://play.google.com/store/apps/details?id=com.deltaapps.FoodSwipe"
          );
        }
        var code = new URLSearchParams(window.location.search).get("code");
        if (code) {
          checkURL(`com.deltaapps.FoodSwipe://?code=${code}`);
        } else {
          // Optionale Fehlerbehandlung, falls kein Code übergeben wurde
          document.body.innerHTML =
            "<p>Es wurde kein gültiger Code übergeben. Bitte überprüfen Sie den Link oder kontaktieren Sie den Absender.</p>";
        }
      };
    </script>
  </body>
</html>
